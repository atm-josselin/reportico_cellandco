<?xml version="1.0"?><Report><ReportQuery><Format><ReportTitle>BC avec anomalie par projet</ReportTitle><ReportDescription></ReportDescription><PageSize>.DEFAULT</PageSize><PageOrientation>Landscape</PageOrientation><TopMargin></TopMargin><BottomMargin></BottomMargin><RightMargin></RightMargin><LeftMargin></LeftMargin><pdfFont></pdfFont><pdfFontSize></pdfFontSize><PreExecuteCode>NONE</PreExecuteCode><formBetweenRows>solidline</formBetweenRows><gridDisplay>show</gridDisplay><gridSortable>.DEFAULT</gridSortable><gridSearchable>.DEFAULT</gridSearchable><gridPageable>.DEFAULT</gridPageable><gridPageSize>.DEFAULT</gridPageSize></Format><Datasource><SourceType>database</SourceType><SourceConnection><DatabaseType>mysql</DatabaseType><DatabaseName></DatabaseName><HostName></HostName><ServiceName></ServiceName><UserName></UserName><Password></Password></SourceConnection></Datasource><EntryForm><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection>all</RowSelection><SQL><QuerySql></QuerySql><SQLRaw>SELECT CONCAT(llx_projet.ref,&quot; - &quot;,llx_projet.title) Projet, ROUND(100*(count(IF(llx_c_input_reason.label = 'Edition manuelle',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS PartManuelle, ROUND(100*(count(IF(llx_c_input_reason.label = 'Modèle de commande',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS Modele, ROUND(100*(count(IF(llx_c_input_reason.label = 'Devis',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS Devis, count(llx_c_input_reason.label) TotalCommandes, ROUND(100*(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL))/(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL)) + COUNT(IF(llx_commande_extrafields.control = 'Conforme',llx_commande.ref,NULL)))),2) AS TauxAnomalie, llx_user.firstname
FROM llx_commande, llx_c_input_reason, llx_commande_extrafields, llx_projet, llx_projet_extrafields, llx_user
WHERE llx_commande.fk_input_reason = llx_c_input_reason.rowid
AND llx_commande.rowid = llx_commande_extrafields.fk_object
AND llx_commande.ref NOT LIKE 'BC-CEL%'
AND llx_commande.fk_projet = llx_projet.rowid
AND llx_commande.fk_statut = 3
AND llx_user.rowid = llx_projet_extrafields.responsableprojet
AND llx_projet.rowid = llx_projet_extrafields.fk_object
AND YEAR(llx_commande.date_creation) = YEAR(now())
GROUP BY llx_projet.ref
ORDER BY ROUND(100*(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL))/(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL)) + COUNT(IF(llx_commande_extrafields.control = 'Conforme',llx_commande.ref,NULL)))),2) DESC</SQLRaw></SQL><QueryColumns><QueryColumn><Name>Projet</Name><TableName></TableName><ColumnName>CONCAT(llx_projet.ref,&quot; - &quot;,llx_projet.title)</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>PartManuelle</Name><TableName></TableName><ColumnName>ROUND(100*(count(IF(llx_c_input_reason.label = 'Edition manuelle',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Part Manuelle</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>Modele</Name><TableName></TableName><ColumnName>ROUND(100*(count(IF(llx_c_input_reason.label = 'Modèle de commande',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Modèle</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>Devis</Name><TableName></TableName><ColumnName>ROUND(100*(count(IF(llx_c_input_reason.label = 'Devis',llx_commande.fk_input_reason,NULL))/count(llx_c_input_reason.label)),2) AS</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>TotalCommandes</Name><TableName></TableName><ColumnName>count(llx_c_input_reason.label)</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Nombre de commandes</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>TauxAnomalie</Name><TableName></TableName><ColumnName>ROUND(100*(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL))/(COUNT(IF(llx_commande_extrafields.control = 'Conforme après correction',llx_commande.ref,NULL)) + COUNT(IF(llx_commande_extrafields.control = 'Conforme',llx_commande.ref,NULL)))),2) AS</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Taux d'anomalie</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>firstname</Name><TableName>llx_user</TableName><ColumnName>firstname</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Responsable Projet</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><PreSQLS></PreSQLS></Query><Assignments></Assignments><Criteria></Criteria><Output><PageHeaders></PageHeaders><PageFooters></PageFooters><DisplayOrders><DisplayOrder><ColumnName>Projet</ColumnName><OrderNumber>1</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>PartManuelle</ColumnName><OrderNumber>2</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>Modele</ColumnName><OrderNumber>3</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>Devis</ColumnName><OrderNumber>4</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>TauxAnomalie</ColumnName><OrderNumber>5</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>TotalCommandes</ColumnName><OrderNumber>6</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>firstname</ColumnName><OrderNumber>7</OrderNumber></DisplayOrder></DisplayOrders><Groups></Groups><Graphs></Graphs></Output></EntryForm></ReportQuery></Report>